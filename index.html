<!DOCTYPE html>
<html>
  <body>
    <canvas id="myCanvas" width="500" height="500" style="border:1px solid #d3d3d3;">
    </canvas>

    <script>
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");

      // 0~255のランダムな数値を返す
      const getRandomNumber = () => Math.round(Math.random() * 255);

      // ランダムな色を返す
      const getRandomColor = () => {
        let r = getRandomNumber();
        let g = getRandomNumber();
        let b = getRandomNumber();
        return `rgb(${r},${g},${b})`
      };

      // (x, y)を起点に横width, 縦heightの四角形を定義するオブジェクト
      // draw関数を呼び出すと四角形を描画する
      var data = {
        x: 0,
        y: 0,
        width: 0,
        height: 0,
        setData: (_x, _y, _width, _height) => {
          this.x = _x;
          this.y = _y;
          this.width = _width;
          this.height = _height;
        },
        draw: () => {
          ctx.fillStyle = getRandomColor();
          ctx.fillRect(this.x, this.y, this.width, this.height);
        }
      };

      // 横50px, 縦50pxのランダムの色の四角形を(10 * 10)個描画する
      const drawRect = (_num) => {
        for (let i = 0; i < _num; i++) {
          for (let j = 0; j < _num; j++) {
            let obj1 = new Object(data);
            obj1.setData(50*i, 50*j, 50, 50);
            obj1.draw();
          };
        };
      };

      setInterval(drawRect, 100, 10);
    </script>
  </body>
</html>
